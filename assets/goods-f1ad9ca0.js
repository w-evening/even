import{d as B,D as V,h as r,o as D,x as f,E,k as v,a as t,l as o,q as u,n as i,p as N,F as R,s as F,t as y,B as G,z as O,A as S}from"./index-4b809c19.js";import{g as c}from"./goods-04134f46.js";import{_ as U}from"./index-b9ff95de.js";import{_ as j}from"./index-2eaeb946.js";import{_ as A,E as M,b as T}from"./index-abdb43a4.js";import{D as $}from"./DeleteOutlined-67fd5099.js";import"./useFlexGapSupport-86488050.js";const Z=B({__name:"goods",setup(H){const k=V(),h=[{title:"商品ID",dataIndex:"goods_id",key:"goods_id",width:"10%"},{title:"商品名称",dataIndex:"goods_name",key:"goods_name",width:"40%"},{title:"商品价格",dataIndex:"goods_price",key:"goods_price"},{title:"商品数量",dataIndex:"goods_number",key:"goods_number"},{title:"商品重量",dataIndex:"goods_weight",key:"goods_weight"},{title:"操作",dataIndex:"operation",key:"operation"}],n=r([]);let s=r(!1);const m=r(1);D(async()=>{s.value=!0;const e=await c({query:null,pagenum:1,pagesize:10});n.value=e.data.goods,f.state.total=e.data.total,s.value=!1});const w=(l,e)=>{s.value=!0,c({query:d.value,pagenum:l,pagesize:e}).then(_=>{n.value=_.data.goods}),s.value=!1},d=r(""),x=l=>{console.log("use value",l),c({query:d.value,pagenum:1,pagesize:10}).then(e=>{n.value=e.data.goods})};return r(!1),(l,e)=>{const _=j,p=G,C=U,g=O,b=S,I=T,q=A,z=E("RouterView");return i(),v("div",null,[t(C,{direction:"horizontal"},{default:o(()=>[t(_,{value:d.value,"onUpdate:value":e[0]||(e[0]=a=>d.value=a),placeholder:"input search text","enter-button":"",onSearch:x,allowClear:!0},null,8,["value"]),t(p,{type:"primary",onClick:e[1]||(e[1]=a=>u(k).push({name:"addGoods"}))},{default:o(()=>[N("添加商品")]),_:1})]),_:1}),t(q,{"row-key":a=>a.goods_id,columns:h,"data-source":n.value,bordered:"",childrenColumnName:"null",pagination:!1,loading:u(s)},{bodyCell:o(({column:a,record:J})=>[a.key==="operation"?(i(),v(R,{key:0},[t(g,{title:"编辑"},{default:o(()=>[t(p,{type:"primary"},{default:o(()=>[t(u(M))]),_:1})]),_:1}),n.value.length?(i(),F(b,{key:0,title:"确定删除?"},{default:o(()=>[t(g,{title:"删除"},{default:o(()=>[t(p,{type:"primary",danger:""},{default:o(()=>[t(u($))]),_:1})]),_:1})]),_:1})):y("",!0)],64)):y("",!0)]),footer:o(()=>[t(I,{current:m.value,"onUpdate:current":e[2]||(e[2]=a=>m.value=a),"show-quick-jumper":"",total:u(f).state.total,onChange:w},null,8,["current","total"])]),_:1},8,["row-key","data-source","loading"]),t(z)])}}});export{Z as default};
